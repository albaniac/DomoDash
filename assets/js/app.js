function e(){return angular.injector(["ng"]).get("$http").get("./config.json?nocache="+(new Date).getTime()).then(function(e){h.constant("CONFIG",e.data),e.data.username&&e.data.password?h.constant("HOSTLOGIN","username="+e.data.username+"&password="+e.data.password+"&"):h.constant("HOSTLOGIN","")},function(e){h.constant("CONFIG",void 0),h.constant("HOSTLOGIN",void 0)})}function t(){angular.element(document).ready(function(){angular.bootstrap(document,["main"])})}function n(e,t,n,a){function o(){r.image="assets/img/bg/"+i+".gif",++i>c&&(i=1),n(r.getImages,6e3)}var r=this,i=1;if(r.backgrounds=[],r.getImages=o,r.image=[],void 0!=a&&void 0!=a.bgimages)c=a.bgimages;else var c=1;o()}function a(e,t,n,a){function o(){s.clientid&&r(!0)}function r(e){gapi.auth.authorize({client_id:s.clientid,scope:s.url,immediate:e},i)}function i(e){e&&!e.error?c():r(!1)}function c(){gapi.client.load("calendar","v3",function(){gapi.client.calendar.events.list({calendarId:"primary",timeMin:"2015-12-23T04:26:52.000Z"}).execute(function(t){e.$apply(function(){s.calendarlist=t.items,s.calandar=t})})})}var s=this;s.calendarlist=[],s.calendar=[],s.clientid=a.calendar_api,s.url="https://www.googleapis.com/auth/calendar",o(),t.$on("$reload",o)}function o(e,t,n,a,o,r,i){function c(t){a.get(e.id,t).then(function(e){l.device=e[0]})}function s(e,t){n.get(a.getHost()+"/json.htm?"+i+"type=command&param=switchlight&idx="+e+"&switchcmd=Set%20Level&level="+t).then(function(){c(!0)})}var l=this;l.deviceid=e.id,l.blocktitle=e.name,l.device={},l.devicesService=a,l.switchDevice=function(e){if("Off"===e.Data)t="On";else var t="Off";n.get(a.getHost()+"/json.htm?"+i+"type=command&param=switchlight&idx="+e.idx+"&switchcmd="+t).then(function(){c(!0)})},l.dimDevice=s,l.getIcon=function(e){if("Dimmer"===e.SwitchType||"Media Player"===e.SwitchType||"On/Off"===e.SwitchType||"Selector"===e.SwitchType)switch(e.Image){case"Light":return"fa-lightbulb-o";case"Alarm":return"fa-bell";case"Amplifier":return"fa-bullhorn";case"ChristmasTree":return"fa-tree";case"Computer":return"fa-laptop";case"ComputerPC":return"fa-desktop";case"Cooling":return"fa-snowflake-o";case"Fan":return"fa-refresh";case"Fireplace":return"fa-fire";case"Generic":return"fa-power-off";case"Harddisk":return"fa-hdd-o";case"Heating":return"fa-thermometer-full";case"Media":return"fa-youtube-play";case"Phone":return"fa-mobile";case"Printer":return"fa-print";case"Speaker":return"fa-volume-up";case"TV":return"fa-television";case"WallSocket":return"fa-plug";case"Water":return"fa-tint"}else switch(e.SwitchType){case"Blinds":case"Blinds Inverted":case"Blinds Percentage":case"Blinds Percentage Inverted":return"fa-bars";case"Contact":return"fa-exchange";case"Door Lock":return"fa-lock";case"Doorbell":return"fa-bell-o";case"Dusk Sensor":return"fa-sun-o";case"Motion Sensor":return"fa-assistive-listening-systems";case"Push Off Button":return"fa-toggle-off";case"Push On Button":return"fa-toggle-on";case"Smoke Detector":return"fa-cloud";case"Venetian Blinds EU":case"Venetian Blinds US":return"fa-bars";case"X10 Siren":return"fa-bullhorn"}},c(!1),e.$on("slideEnded",function(e,t){var n=e.targetScope.rzSliderModel;s(l.deviceid,n)})}function r(e,t,n,a,o){function r(){n.get(s+"&mode=queue").then(function(e){c.downloads=e.data.queue})}function i(){n.get(s+"&mode=history&limit=3").then(function(e){c.history=e.data.history})}var c=this,s=a.sabnzb_hostname+"?apikey="+a.sabnzb_api+"&output=json";c.title=e.name,c.job="resume",c.downloads={},c.history={},c.toggleDownload=function(e,t){"Downloading"===e&&(c.job="pause"),"Pause"!==e&&"Idle"!==e||(c.job="resume"),console.log(c.job),n.get(s+"&mode=queue&name="+c.job+"&value="+t).then(function(e){r()})},a.sabnzb_hostname&&a.sabnzb_api&&(r(),i()),t.$on("$reload",function(e,t){a.sabnzb_hostname&&a.sabnzb_api&&(r(),i())})}function i(e,t,n,a,o,r){function i(){"recyclemanager"===l.app&&c(),"mijnafvalwijzer"===l.app&&s()}function c(){n.get("https://vpn-wec-api.recyclemanager.nl/v2/calendars?postalcode="+l.zipcode+"&number="+l.homenr+"&mode=queue").then(function(e){var t=e.data.data[0].occurrences;l.garbagedata=t.map(function(e){return{title:e.title,type:r("lowercase")(e.title),date:new Date(e.from.date)}})})}function s(){n.get("https://cors-anywhere.herokuapp.com/http://json.mijnafvalwijzer.nl/?method=postcodecheck&postcode="+l.zipcode+"&street=&huisnummer="+l.homenr+"&toevoeging=").then(function(e){var t=e.data.data.ophaaldagen.data;l.garbagedata=t.map(function(e){return{title:e.nameType,type:e.type,date:new Date(e.date)}}).filter(function(e){return e.date.getMonth()===(new Date).getMonth()})})}var l=this;l.homenr=a.garbage_homenr,l.zipcode=a.garbage_zipcode,l.app=a.garbage_app,l.currentDate=new Date,l.title=e.name,l.garbagedata={},l.currentyear=(new Date).getFullYear(),l.homenr&&l.zipcode&&l.app&&i(),t.$on("$reload",function(e,t){l.homenr&&l.zipcode&&l.app&&i()})}function c(e,t,n,a){function o(){i.blocks&&angular.forEach(i.blocks,function(e,t){e.type.match("Device")&&(i.gotDevices=!0)})}function r(){!0===i.gotDevices&&t.get(!0)}var i=this;i.gotDevices=!1,i.blocks=n.blocks,o(),r(),e.$on("$reload",function(e,n){!0===i.gotDevices&&t.get(!0)})}function s(e,t,n,a,o){function r(e){n.get("././config.json?nocache="+(new Date).getTime()).then(function(n){i.settings=n.data,n.data.username&&n.data.password&&(i.settings.username=atob(n.data.username),i.settings.password=atob(n.data.password)),i.settings.news||(i.settings.news=[]),i.settings.colums||(i.settings.colums=[]),i.settings.blocks||(i.settings.blocks=[]),i.settings.tabs||(i.settings.tabs=[]),!0===e&&t.$broadcast("$render",n.data)})}var i=this;i.settings=o,i.load=t.load,i.username="",i.password="",i.isActive=!1,i.message=!1,i.saveSettings=function(){i.settings.username&&i.settings.password&&(i.settings.username=btoa(i.settings.username),i.settings.password=btoa(i.settings.password)),n.post("app/settings/settings.save.php",i.settings).then(function(e){"success"===e.data.status&&(i.message=!0,a(function(){i.message=!1},2e3),r(!0))})},i.editNews=function(e,t){if("add"===t)i.settings.news.push({location:""});else{var n=[];angular.forEach(i.settings.news,function(e){e.selected||n.push(e)}),i.settings.news=n}},i.editColums=function(e,t){if("add"===t)i.settings.colums.push({colum:"",class:""});else{var n=[];angular.forEach(i.settings.colums,function(e){e.selected||n.push(e)}),i.settings.colums=n}},i.editBlocks=function(e,t){if("add"===t)i.settings.blocks.push({type:"",class:"",colum:"colum"+i.settings.colums[0].colum,title:""});else{var n=[];angular.forEach(i.settings.blocks,function(e){e.selected||n.push(e)}),i.settings.blocks=n}},i.toggle=function(){i.isActive=!i.isActive},i.saveManualy=function(){i.toJSON="",i.toJSON=angular.toJson(i.settings);var e=new Blob([i.toJSON],{type:"application/json;charset=utf-8;"}),t=angular.element("<a></a>");t.attr("href",window.URL.createObjectURL(e)),t.attr("download","config.json"),t[0].click()},i.availableblocks=["Heading","Device","News","Weather","Traffic","Calendar","Spotify","Tvguide","Sabnzb","Garbage"],i.garbageapp=["recyclemanager","mijnafvalwijzer"],r()}function l(e,t,n,a,o){function r(e,t){n.get(t.location).then(function(t){var n=(new X2JS).xml_str2json(t.data);c.newstitle[e]=n.rss.channel.title,c.news[e]=i(n.rss.channel.item),o(function(){c.changed=!1},1e3)})}function i(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e}var c=this;c.news=[],c.newstitle=[],c.newslimit=1,c.newssources=a.news,c.changed=!0,c.getNews=r,t.$on("$reload",function(e,t){c.changed=!0,angular.forEach(a.news,function(e,t){r(t,e)})})}function u(e,t,n,a,o,r){function i(){var e=encodeURIComponent(window.location.href);if(window.location.href.split("/")[3]){var t=window.location.href.split("/")[3],r=new URLSearchParams(t);r.get("access_token")&&(u.settings.spotify_access_token=r.get("access_token"),n.post("app/settings/settings.save.php",u.settings).then(function(e){c(e.spotify_access_token),s(e.spotify_access_token),a.path("/")}))}u.settings.spotify_access_token||(window.location="https://accounts.spotify.com/authorize/?client_id="+o.spotify_clientid+"&redirect_uri="+e+"&scope=playlist-read-private%20user-read-private%20user-read-email%20user-read-currently-playing%20user-read-playback-state%20user-read-recently-played&response_type=token")}function c(e){n.get("https://api.spotify.com/v1/users/"+o.spotify_username+"/playlists",{headers:{Authorization:"Bearer "+e}}).then(function(e){u.playlist=e.data.items},function(e){"The access token expired"===e.data.error.message&&i()})}function s(e){n.get("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:"Bearer "+e}}).then(function(e){null===e.data.context?l(u.playlist[0].uri):u.defaultplaylist="http://embed.spotify.com?uri="+e.data.context.uri+"&theme=black&view=coverart"})}function l(e){u.defaultplaylist="http://embed.spotify.com?uri="+e+"&theme=black&view=coverart"}var u=this;u.playlist={},u.settings=o,u.defaultplaylist="",u.playlisttotal="",u.playPlaylist=l,void 0===o.spotify_access_token?i():(c(o.spotify_access_token),s(o.spotify_access_token)),t.$on("$reload",function(e,t){void 0===o.spotify_access_token?i():(c(o.spotify_access_token),s(o.spotify_access_token))})}function d(e,t,n,a){function o(){n.get(c.hosturl+"channels.php").then(function(e){var t=e.data.map(function(e){return e.id=parseInt(e.id),e});for(var n in c.sortedChannels)c.sortedChannels[n]=c.sortedChannels[n].map(function(e){return t.find(function(t){return t.id===e})}),c.sortedChannels[n]=c.sortedChannels[n].filter(function(e){return void 0!==e});c.channels=c.sortedChannels,r()})}function r(){var e=c.channels[c.selectedCategory][c.offset].id,t=c.channels[c.selectedCategory][c.offset+1].id;n.get(c.hosturl+"programs.php?channels="+e+","+t+"&day=0").then(function(e){c.programs=e.data,angular.forEach(c.programs,function(e,t){c.programs[t]=i(e)})})}function i(e){return(e=Object.keys(e).map(function(t){return e[t]})).filter(function(e){return new Date(e.datum_end).getTime()>Date.now()})}var c=this;c.hosturl="https://cors-anywhere.herokuapp.com/http://www.tvgids.nl/json/lists/",c.selectedCategory="mostviewed",c.offset=0,c.channels=[],c.programs={},c.sort=function(e){"prev"===e?c.offset-=2:"next"===e?c.offset+=2:c.offset=0,r()},c.sortedChannels={mostviewed:[1,2,3,4,31,36,46,37,34,92,91,471,472,438,29,18,24,435,5,6,440,460],sport:[19,436,466,148,99,419,420,421,417,418,468,469,470],movies:[411,39,107,304],entertainment:[93,462,94,407,431,432,433,430,408,409,317,437,66,104,464,315,404,467],music:[25,425,427,426,428,429],children:[89,21,424,311,312,313,461],knowledge:[416,415,413,306,406,305,414,439,81,70,38,473],news:[26,422,86,423],regional:[108,109,110,111,112,113,103,100,101,102,116,114,115,40],erotic:[401,434,105,400],other:[64,465,316,410,90,7,8,300,301,60,49,59,15,16,17,9,10,12,13,11,28,50,58,32]},o(),t.$on("$reload",function(e,t){})}function f(e,t,n,a,o,r){function i(){n.get(c.url).then(function(e){c.traffic=e.data.roadEntries,c.newtrafficlist={},angular.forEach(c.traffic,function(e){c.newtrafficlist=e,angular.forEach(e.events,function(e,t){0!=e.length&&"roadWorks"==t?angular.merge(c.newtrafficlist,{roadwork:e}):0!=e.length&&"trafficJams"==t&&angular.merge(c.newtrafficlist,{trafficjam:e})})})})}var c=this;c.traffic=[],c.newtrafficlist=[],c.url=a.traffic_url,c.activestate="trafficjam",i(),t.$on("$reload",function(e,t){i()})}function m(e,t,n,a,o,r,i){function c(){n.get("https://api.wunderground.com/api/"+i.weather_wunderground_api+"/conditions/q/"+i.weather_country+"/"+i.weather_location+".json").then(function(e){d.weather=e.data.current_observation,d.location=d.weather.display_location.city,u(d.weather.icon,"")})}function s(){n.get("https://api.wunderground.com/api/"+i.weather_wunderground_api+"/forecast10day/q/"+i.weather_country+"/"+i.weather_location+".json").then(function(e){d.forecast=e.data.forecast.simpleforecast.forecastday})}function l(){d.time=r("date")(new Date,"HH:mm:ss"),d.day=r("date")(new Date,"EEEE"),d.date=r("date")(new Date,"dd - MM - yyyy")}function u(e,t){o(function(){var n=new Skycons({color:"white"}),a="icon"+t;"chanceflurries"==e&&n.add(a,Skycons.WIND),"chancerain"==e&&n.add(a,Skycons.RAIN),"chancesleet"==e&&n.add(a,Skycons.SLEET),"chancesnow"==e&&n.add(a,Skycons.SNOW),"chancetstorms"==e&&n.add(a,Skycons.WIND),"clear"==e&&n.add(a,Skycons.CLEAR_DAY),"cloudy"==e&&n.add(a,Skycons.CLOUDY),"flurries"==e&&n.add(a,Skycons.WIND),"fog"==e&&n.add(a,Skycons.FOG),"hazy"==e&&n.add(a,Skycons.PARTLY_CLOUDY_DAY),"mostlycloudy"==e&&n.add(a,Skycons.CLOUDY),"mostlysunny"==e&&n.add(a,Skycons.CLEAR_DAY),"partlycloudy"==e&&n.add(a,Skycons.PARTLY_CLOUDY_DAY),"partlysunny"==e&&n.add(a,Skycons.PARTLY_CLOUDY_DAY),"sleet"==e&&n.add(a,Skycons.SLEET),"rain"==e&&n.add(a,Skycons.RAIN),"snow"==e&&n.add(a,Skycons.SNOW),"sunny"==e&&n.add(a,Skycons.CLEAR_DAY),"tstorms"==e&&n.add(a,Skycons.WIND),n.play()},0)}var d=this;d.time="",d.day="",d.date="",d.active=(l(),c(),void s()),d.getIcon=u;a(function(){c(),s()},i.weather_refresh),a(function(){l()},1e3)}n.$inject=["$scope","$rootScope","$timeout","CONFIG"],a.$inject=["$scope","$rootScope","$http","CONFIG"],o.$inject=["$scope","$rootScope","$http","devicesService","$timeout","CONFIG","HOSTLOGIN"],r.$inject=["$scope","$rootScope","$http","CONFIG","$interval"],i.$inject=["$scope","$rootScope","$http","CONFIG","$timeout","$filter"],c.$inject=["$rootScope","devicesService","CONFIG","HOSTLOGIN"],s.$inject=["$scope","$rootScope","$http","$timeout","CONFIG"],l.$inject=["$scope","$rootScope","$http","CONFIG","$timeout"],u.$inject=["$scope","$rootScope","$http","$location","CONFIG","HOSTLOGIN"],d.$inject=["$scope","$rootScope","$http","CONFIG"],f.$inject=["$scope","$rootScope","$http","CONFIG","$timeout","$filter"],m.$inject=["$scope","$rootScope","$http","$interval","$timeout","$filter","CONFIG"];var h=angular.module("main",["ngAnimate","rzModule","angular-carousel"]);e().then(t),h.config(["$sceProvider","$locationProvider","$compileProvider","$animateProvider",function(e,t,n,a){a.classNameFilter(/angular-animate/),e.enabled(!1),n.aHrefSanitizationWhitelist(/^\s*(|blob|):/),t.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("main").run(["$interval","$rootScope","devicesService","CONFIG","HOSTLOGIN",function(e,t,n,a,o){if(t.load=!1,void 0!=a&&void 0!=a.refresh)r=a.refresh;else var r=5e3;if(void 0!=a&&a.hostname){t.load=!0;e(function(){t.$broadcast("$reload")},r)}}]),angular.module("main").directive("bg",function(){return{scope:{},controller:"BackgroundController",controllerAs:"vm",templateUrl:"app/bg/bg.tpl.html"}}),angular.module("main").controller("BackgroundController",n).animation(".background__image",function(){return{leave:function(e,t){e[0].style.opacity=0,setTimeout(t,1500)}}}),angular.module("main").controller("CalendarController",a),angular.module("main").directive("calendar",function(){return{scope:{},controller:"CalendarController",controllerAs:"vm",templateUrl:"app/calendar/calendar.tpl.html"}}),angular.module("main").controller("DevicesController",o),function(){"use strict";function e(e,t,n,a,o){function r(t,n){return e.get(c()+"/json.htm?"+o+"type=devices&filter=light&used=true&order=Name").then(function(e){return t=e.data.result,i(t,n)})}function i(e,t){return e.filter(function(e){return e.idx==t})}function c(){return l=-1!=a.hostname.indexOf(location.hostname)||"localhost"===location.hostname?a.hostname:a.internalhostname}var s={},l=a.hostname;return{get:function(e,t){return c(),s.length&&!1===t?i(s,e):r(s,e)},getHost:c}}e.$inject=["$http","$filter","$timeout","CONFIG","HOSTLOGIN"],angular.module("main").service("devicesService",e)}(),angular.module("main").directive("device",function(){return{scope:{data:"=",id:"=",name:"@"},controller:"DevicesController",controllerAs:"vm",templateUrl:"app/devices/devices.tpl.html"}}),angular.module("main").controller("SabnzbController",r),angular.module("main").directive("sabnzb",function(){return{scope:{name:"@"},controller:"SabnzbController",controllerAs:"vm",templateUrl:"app/sabnzb/sabnzb.tpl.html"}}),angular.module("main").controller("GarbageController",i),angular.module("main").directive("garbage",function(){return{scope:{name:"@"},controller:"GarbageController",controllerAs:"vm",templateUrl:"app/garbage/garbage.tpl.html"}}),angular.module("main").controller("GridController",c),angular.module("main").directive("grid",["$rootScope","$compile","$http","devicesService","CONFIG","HOSTLOGIN",function(e,t,n,a,o,r){return{scope:{},controller:"GridController",controllerAs:"vm",link:function(n,a){function r(){angular.forEach(s.colums,function(e){angular.element(document.getElementById("colums")).append('<div id="colum'+e.colum+'" class="colum '+e.class+'"></div>')}),t(a.contents())(n)}function i(){angular.forEach(s.blocks,function(e){c(e)}),t(a.contents())(n)}function c(e){switch(e.type){case"Heading":angular.element(document.getElementById(e.colum)).append('<div class="heading '+e.class+'">'+e.title+"</div>");break;case"Device":angular.element(document.getElementById(e.colum)).append('<block class="block dev '+e.class+'"><device class="device" name="'+e.title+'" id="'+e.idx+'"></device></block>');break;case"News":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><news></news></block>');break;case"Tabs":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><tabs id="tabs"></tabs></block>');break;case"Weather":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><weather></weather></block>');break;case"Traffic":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><traffic></traffic></block>');break;case"Spotify":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><spotify></spotify></block>');break;case"Calendar":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><calendar></calendar></block>');break;case"Tvguide":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><tvguide></tvguide></block>');break;case"Sabnzb":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><sabnzb name="'+e.title+'"></sabnzb></block>');break;case"Garbage":angular.element(document.getElementById(e.colum)).append('<block class="block '+e.class+'"><garbage name="'+e.title+'"></garbage></block>')}}var s=this;s.colums=o.colums,s.blocks=o.blocks,r(),i(),e.$on("$render",function(e,t){s.colums=t.colums,s.blocks=t.blocks,angular.element(document.querySelector("#colums")).empty(),r(),i()})}}}]),angular.module("main").controller("SettingsController",s),angular.module("main").directive("settings",function(){return{scope:{},controller:"SettingsController",controllerAs:"vm",templateUrl:"app/settings/settings.tpl.html"}}),angular.module("main").controller("NewsController",l),angular.module("main").directive("news",function(){return{scope:{},controller:"NewsController",controllerAs:"vm",templateUrl:"app/news/news.tpl.html"}}),angular.module("main").controller("SpotifyController",u),angular.module("main").directive("spotify",function(){return{scope:{},controller:"SpotifyController",controllerAs:"vm",templateUrl:"app/spotify/spotify.tpl.html"}}),angular.module("main").directive("tooltip",[function(e){return{link:function(e,t,n){t.addClass("tooltip-wrap").append(angular.element('<div class="tooltip-text">'+n.title+"</div>")).removeAttr("title"),t.bind("click",function(){-1!==t[0].className.indexOf("active")?t.removeClass("active"):t.addClass("active")})}}}]),angular.module("main").filter("removeHTMLTags",function(){return function(e){return e?String(e).replace(/<[^>]+>/gm,""):""}}),function(e){"use strict";function t(e,t,n,a){e.beginPath(),e.arc(t,n,a,0,g,!1),e.fill()}function n(e,t,n,a,o){e.beginPath(),e.moveTo(t,n),e.lineTo(a,o),e.stroke()}function a(e,n,a,o,r,i,c,s){var l=Math.cos(n*g);t(e,a-Math.sin(n*g)*r,o+l*i+.5*(s-=c),c+(1-.5*l)*s)}function o(e,t,n,o,r,i,c,s){var l;for(l=5;l--;)a(e,t+l/5,n,o,r,i,c,s)}function r(e,t,n,a,r,i,c){t/=3e4;var s=.21*r,l=.12*r,u=.24*r,d=.28*r;e.fillStyle=c,o(e,t,n,a,s,l,u,d),e.globalCompositeOperation="destination-out",o(e,t,n,a,s,l,u-i,d-i),e.globalCompositeOperation="source-over"}function i(e,t,a,o,r,i,c){t/=12e4;var s,l,u,d,f=.25*r-.5*i,m=.32*r+.5*i,h=.5*r-.5*i;for(e.strokeStyle=c,e.lineWidth=i,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(a,o,f,0,g,!1),e.stroke(),s=8;s--;)l=(t+s/8)*g,n(e,a+(u=Math.cos(l))*m,o+(d=Math.sin(l))*m,a+u*h,o+d*h)}function c(e,t,n,a,o,r,i){t/=15e3;var c=.29*o-.5*r,s=.05*o,l=Math.cos(t*g),u=l*g/-16;e.strokeStyle=i,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",n+=l*s,e.beginPath(),e.arc(n,a,c,u+g/8,u+7*g/8,!1),e.arc(n+Math.cos(u)*c*v,a+Math.sin(u)*c*v,c,u+5*g/8,u+3*g/8,!0),e.closePath(),e.stroke()}function s(e,t,n,a,o,r,i){t/=1350;var c,s,l,u,d=.16*o,f=11*g/12,m=7*g/12;for(e.fillStyle=i,c=4;c--;)s=(t+c/4)%1,l=n+(c-1.5)/1.5*(1===c||2===c?-1:1)*d,u=a+s*s*o,e.beginPath(),e.moveTo(l,u-1.5*r),e.arc(l,u,.75*r,f,m,!1),e.fill()}function l(e,t,a,o,r,i,c){t/=750;var s,l,u,d,f=.1875*r;for(e.strokeStyle=c,e.lineWidth=.5*i,e.lineCap="round",e.lineJoin="round",s=4;s--;)l=(t+s/4)%1,n(e,u=Math.floor(a+(s-1.5)/1.5*(1===s||2===s?-1:1)*f)+.5,(d=o+l*r)-1.5*i,u,d+1.5*i)}function u(e,t,a,o,r,i,c){var s,l,u,d,f=.16*r,m=.75*i,h=(t/=3e3)*g*.7,p=Math.cos(h)*m,v=Math.sin(h)*m,b=h+g/3,y=Math.cos(b)*m,w=Math.sin(b)*m,k=h+2*g/3,S=Math.cos(k)*m,C=Math.sin(k)*m;for(e.strokeStyle=c,e.lineWidth=.5*i,e.lineCap="round",e.lineJoin="round",s=4;s--;)l=(t+s/4)%1,n(e,(u=a+Math.sin((l+s/4)*g)*f)-p,(d=o+l*r)-v,u+p,d+v),n(e,u-y,d-w,u+y,d+w),n(e,u-S,d-C,u+S,d+C)}function d(e,t,n,a,r,i,c){t/=3e4;var s=.21*r,l=.06*r,u=.21*r,d=.28*r;e.fillStyle=c,o(e,t,n,a,s,l,u,d),e.globalCompositeOperation="destination-out",o(e,t,n,a,s,l,u-i,d-i),e.globalCompositeOperation="source-over"}function f(e,t,n,a,o,r,i){var c=o/8,s=c/3,l=2*s,u=t%1*g,d=Math.cos(u),f=Math.sin(u);e.fillStyle=i,e.strokeStyle=i,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(n,a,c,u,u+Math.PI,!1),e.arc(n-s*d,a-s*f,l,u+Math.PI,u,!1),e.arc(n+l*d,a+l*f,s,u+Math.PI,u,!0),e.globalCompositeOperation="destination-out",e.fill(),e.globalCompositeOperation="source-over",e.stroke()}function m(e,t,n,a,o,r,i,c,s){t/=2500;var l,u,d,m,h=b[i],p=(t+i-y[i].start)%c,g=(t+i-y[i].end)%c,v=(t+i)%c;if(e.strokeStyle=s,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",p<1){if(e.beginPath(),p*=h.length/2-1,l=Math.floor(p),p-=l,l*=2,l+=2,e.moveTo(n+(h[l-2]*(1-p)+h[l]*p)*o,a+(h[l-1]*(1-p)+h[l+1]*p)*o),g<1){for(g*=h.length/2-1,g-=u=Math.floor(g),u*=2,u+=2,m=l;m!==u;m+=2)e.lineTo(n+h[m]*o,a+h[m+1]*o);e.lineTo(n+(h[u-2]*(1-g)+h[u]*g)*o,a+(h[u-1]*(1-g)+h[u+1]*g)*o)}else for(m=l;m!==h.length;m+=2)e.lineTo(n+h[m]*o,a+h[m+1]*o);e.stroke()}else if(g<1){for(e.beginPath(),g*=h.length/2-1,g-=u=Math.floor(g),u*=2,u+=2,e.moveTo(n+h[0]*o,a+h[1]*o),m=2;m!==u;m+=2)e.lineTo(n+h[m]*o,a+h[m+1]*o);e.lineTo(n+(h[u-2]*(1-g)+h[u]*g)*o,a+(h[u-1]*(1-g)+h[u+1]*g)*o),e.stroke()}v<1&&(v*=h.length/2-1,v-=d=Math.floor(v),d*=2,f(e,t,n+(h[(d+=2)-2]*(1-v)+h[d]*v)*o,a+(h[d-1]*(1-v)+h[d+1]*v)*o,o,r,s))}var h,p;!function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame;t&&n?(h=function(e){function n(){a.value=t(n),e()}var a={value:null};return n(),a},p=function(e){n(e.value)}):(h=setInterval,p=clearInterval)}();var g=2*Math.PI,v=2/Math.sqrt(2),b=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],y=[{start:.36,end:.11},{start:.56,end:.16}],w=function(e){this.list=[],this.interval=null,this.color=e&&e.color?e.color:"black",this.resizeClear=!(!e||!e.resizeClear)};w.CLEAR_DAY=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,r=Math.min(a,o);i(e,t,.5*a,.5*o,r,.08*r,n)},w.CLEAR_NIGHT=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,r=Math.min(a,o);c(e,t,.5*a,.5*o,r,.08*r,n)},w.PARTLY_CLOUDY_DAY=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,c=Math.min(a,o);i(e,t,.625*a,.375*o,.75*c,.08*c,n),r(e,t,.375*a,.625*o,.75*c,.08*c,n)},w.PARTLY_CLOUDY_NIGHT=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,i=Math.min(a,o);c(e,t,.667*a,.375*o,.75*i,.08*i,n),r(e,t,.375*a,.625*o,.75*i,.08*i,n)},w.CLOUDY=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,i=Math.min(a,o);r(e,t,.5*a,.5*o,i,.08*i,n)},w.RAIN=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,i=Math.min(a,o);s(e,t,.5*a,.37*o,.9*i,.08*i,n),r(e,t,.5*a,.37*o,.9*i,.08*i,n)},w.SLEET=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,i=Math.min(a,o);l(e,t,.5*a,.37*o,.9*i,.08*i,n),r(e,t,.5*a,.37*o,.9*i,.08*i,n)},w.SNOW=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,i=Math.min(a,o);u(e,t,.5*a,.37*o,.9*i,.08*i,n),r(e,t,.5*a,.37*o,.9*i,.08*i,n)},w.WIND=function(e,t,n){var a=e.canvas.width,o=e.canvas.height,r=Math.min(a,o);m(e,t,.5*a,.5*o,r,.08*r,0,2,n),m(e,t,.5*a,.5*o,r,.08*r,1,2,n)},w.FOG=function(e,t,a){var o=e.canvas.width,r=e.canvas.height,i=Math.min(o,r),c=.08*i;d(e,t,.5*o,.32*r,.75*i,c,a),t/=5e3;var s=Math.cos(t*g)*i*.02,l=Math.cos((t+.25)*g)*i*.02,u=Math.cos((t+.5)*g)*i*.02,f=Math.cos((t+.75)*g)*i*.02,m=.936*r,h=Math.floor(m-.5*c)+.5,p=Math.floor(m-2.5*c)+.5;e.strokeStyle=a,e.lineWidth=c,e.lineCap="round",e.lineJoin="round",n(e,s+.2*o+.5*c,h,l+.8*o-.5*c,h),n(e,u+.2*o+.5*c,p,f+.8*o-.5*c,p)},w.prototype={_determineDrawingFunction:function(e){return"string"==typeof e&&(e=w[e.toUpperCase().replace(/-/g,"_")]||null),e},add:function(e,t){var n;"string"==typeof e&&(e=document.getElementById(e)),null!==e&&"function"==typeof(t=this._determineDrawingFunction(t))&&(n={element:e,context:e.getContext("2d"),drawing:t},this.list.push(n),this.draw(n,500))},set:function(e,t){var n;for("string"==typeof e&&(e=document.getElementById(e)),n=this.list.length;n--;)if(this.list[n].element===e)return this.list[n].drawing=this._determineDrawingFunction(t),void this.draw(this.list[n],500);this.add(e,t)},remove:function(e){var t;for("string"==typeof e&&(e=document.getElementById(e)),t=this.list.length;t--;)if(this.list[t].element===e)return void this.list.splice(t,1)},draw:function(e,t){var n=e.context.canvas;this.resizeClear?n.width=n.width:e.context.clearRect(0,0,n.width,n.height),e.drawing(e.context,t,this.color)},play:function(){var e=this;this.pause(),this.interval=h(function(){var t,n=Date.now();for(t=e.list.length;t--;)e.draw(e.list[t],n)},1e3/60)},pause:function(){this.interval&&(p(this.interval),this.interval=null)}},e.Skycons=w}(this),angular.module("main").controller("TvguideController",d),angular.module("main").directive("tvguide",function(){return{scope:{},controller:"TvguideController",controllerAs:"vm",templateUrl:"app/tvguide/tvguide.tpl.html"}}),angular.module("main").controller("TrafficController",f),angular.module("main").directive("traffic",function(){return{scope:{},controller:"TrafficController",controllerAs:"vm",templateUrl:"app/traffic/traffic.tpl.html"}}),angular.module("main").directive("weather",function(){return{scope:{},controller:"WeatherController",controllerAs:"vm",templateUrl:"app/weather/weather.tpl.html"}}),angular.module("main").controller("WeatherController",m);